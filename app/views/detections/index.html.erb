<button class="btn btn-lg btn-block btn-primary disabled" type="button">
  <%= t('activerecord.models.product') %>: <%= @product.name %> - Vers. <%= @product.version %>
</button>
<br />
<br />
<%= will_paginate @detections, :renderer => BootstrapPagination::Rails %>

<table class="table table-striped table-bordered">
  <tr>
    <th><%= t('activerecord.attributes.detection.name') %></th>
    <th><%= t('activerecord.attributes.detection.created_at') %></th>
    <th><%= t('activerecord.attributes.detection.xml_file_name') %></th>
    <th><%= t('activerecord.attributes.detection.xml_updated_at') %></th>
    <th><%= t('actions.messages.acquisition') %></th>
    <th><%= t('actions.actions') %></th>
  </tr>

<% @detections.each do |detection| %>
  <tr>
    <td><%= detection.name %></td>
    <td><%= detection.created_at.localtime.strftime('%d/%m/%Y - %H:%M:%S') %></td>
    <td><%= detection.xml_file_name %></td>
    <td><%= detection.xml_updated_at.localtime.strftime('%d/%m/%Y - %H:%M:%S') %></td>
    <td>
      <% if detection.acquired %>  
        <span class="label label-success"><i class="glyphicon glyphicon-thumbs-up glyphicon-inverse"></i></span>
      <% else %>
        <span class="label label-warning"><i class="glyphicon glyphicon-wrench glyphicon-inverse"></i></span>
      <% end %>
    </td>
    <td><div class="btn-group">
      <%= link_to raw('<i class="glyphicon glyphicon-pencil"></i>'), edit_detection_path(detection), :class => "btn btn-default", :title => t('actions.edit'), :alt => t('actions.edit') %>
      <%= link_to raw('<i class="glyphicon glyphicon-list-alt"></i>'), detected_components_path(:detection_id => detection.id, :commit => "clear"), :class => "btn btn-default", :title => t('activerecord.models.detected_components'), :alt => t('activerecord.models.detected_components') %>
        <% if detection.acquired %>
         <%= link_to raw('<i class="glyphicon glyphicon-download-alt"></i>'), "#", :class => "btn btn-default", disabled: true, :title => t('actions.disabled'), :alt => t('actions.disabled') %>
         <%= link_to raw('<i class="glyphicon glyphicon-trash"></i>'), "#", :class => "btn btn-default", disabled: true, :title => t('actions.disabled'), :alt => t('actions.disabled') %>
       <% else %>
         <%= link_to raw('<i class="glyphicon glyphicon-download-alt"></i>'), detections_validate_components_path(:detection_id => detection.id), :class => "btn btn-default", disabled: detection.acquired, :title => t('actions.acquire'), :alt => t('actions.acquire') %>
         <%= link_to raw('<i class="glyphicon glyphicon-trash"></i>'), detection, method: :delete, data: { confirm: t('actions.are_you_sure') }, :class => "btn btn-default", :title => t('actions.destroy'), :alt => t('actions.destroy') %>
       <% end %>
    </td>
  </tr>
  
<% end %>
</table>

<br />

<%= link_to new_detection_path(:product_id => params[:product_id]), :title => t('actions.new'), :alt => t('actions.new'), :class => "btn" do %>
  <i class="glyphicon glyphicon-plus"></i> <%= t('actions.new') %>
<% end %>
 <%= link_to products_path, :class => "btn btn-default" do %>
   <i class="glyphicon glyphicon-arrow-left"></i> <%= t('actions.back') %>
<% end %>

