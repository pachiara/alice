<%= render :partial => "search_product_groupage" %>
<%= render :partial => "search_product" %>
<%= will_paginate @products, :renderer => BootstrapPagination::Rails %>

<table class="table table-striped table-condensed table-bordered">
  <tr>
    <%= form_tag products_path, :method => 'get' %>
      <th>
        <%= button_tag(:class => @class_name, :type => 'submit', :name => 'order', :value => 'name') do  %>
          <%= t('activerecord.attributes.product.name')%>
          <% if !@down_name.nil? %>
            <% if @down_name %>
              <i class="icon-chevron-up"></i>
            <% else %>
              <i class="icon-chevron-down"></i>
            <% end %>
          <% end %>
        <% end %>
      </th>
      <th><%= t('activerecord.attributes.product.version') %></th>
      <th><%= t('activerecord.attributes.product.title') %></th>
      <th>
        <%= button_tag(:class => @class_groupage, :type => 'submit', :name => 'order', :value => 'groupage') do  %>
          <%= t('activerecord.attributes.product.groupage')%>
          <% if !@down_groupage.nil? %>
            <% if @down_groupage %>
              <i class="icon-chevron-up"></i>
            <% else %>
              <i class="icon-chevron-down"></i>
            <% end %>
          <% end %>
        <% end %>
      </th>
      <th><%= t('activerecord.attributes.product.use') %></th>
      <th><%= t('activerecord.attributes.product.checked_at') %></th>
      <th><%= t('activerecord.attributes.product.result') %></th>
      <th><%= t('actions.actions') %></th>
    </form>
  </tr>

<% @products.each do |product| %>
  <tr>
    <td><%= product.name %></td>
    <td><%= product.version %></td>
    <td><%= product.title %></td>
    <td><%= unless product.groupage.nil?; product.groupage; end %></td>
    <td><%= unless product.use.nil?; product.use.description; end %></td>
    <td><% if !product.checked_at.nil? %><%= l product.checked_at %><% end %></td>
    <td>
      <% if product.result.nil? %>
        <span class="label label-warning">NC</span>
        <% else %>
          <% if product.result? %>
            <span class="label label-success">OK</span>
        	<% else %>
    	     <span class="label label-important">KO</span>
          <% end %>
    	<% end %>
    </td>
    <td>
      <div class="btn-group">
    	<%= link_to raw('<i class="icon-picture"></i>'), product, :class => "btn", :title => t('actions.graphics'), :alt => t('actions.graphics') %>
    	<%= link_to raw('<i class="icon-pencil"></i>'), edit_product_path(product), :class => "btn", :title => t('actions.edit'), :alt => t('actions.edit') %>
        <%= link_to raw('<i class="icon-list"></i>'), product_ties_show_path(product), :class => "btn", :title => t('activerecord.models.components'), :alt => t('activerecord.models.components') %>
        <%= link_to raw('<i class="icon-check"></i>'), product_check_path(product), :class => "btn", :title => t('actions.check'), :alt => t('actions.check') %>
        <%= link_to raw('<i class="icon-search"></i>'), detections_path(:product_id => product.id), :class => "btn", :title => t('activerecord.models.detections'), :alt => t('activerecord.models.detections') %>
    	<%= link_to raw('<i class="icon-trash"></i>'), product, method: :delete, data: { confirm: t('actions.are_you_sure') }, :class => "btn", :title => t('actions.destroy'), :alt => t('actions.destroy') %>
      </div>
    </td>
  </tr>
<% end %>
</table>

<br />
<%= link_to new_product_path, :class => "btn", :title => t('actions.new'), :alt => t('actions.new') do %>
  <i class="icon-plus"></i> <%= t('actions.new') %>
<% end %>



